# AI Interviewer Workflow Update

## Overview
Updated the AI Interviewer workflow to include a specific greeting and send the initial conversation to the n8n workflow when starting an interview.

## Changes Made

### 1. AI Interviewer Prompt Update
**File:** `prompts/ai_interview_agent_enhanced.md`

- Added specific initial greeting requirement
- AI Agent now starts with: **"Hi! I'm Supriya from AutoomStudio. I'll be your interviewer today. Ready to dive in?"**
- Updated output format to include initial greeting instructions

### 2. Interview System Service Updates
**File:** `src/services/interviewSystem.ts`

#### `sendToN8nWorkflow` Method
- Added `initial_greeting` field to payload
- Added `candidate_response` field to payload
- Sends both the greeting and candidate's initial response to the workflow

#### `sendCandidateResponse` Method
- Added `conversation_context` to payload
- Includes the initial greeting in conversation context
- Maintains conversation flow for AI Agent

## Workflow Flow

### 1. Start Interview
When "Start Interview" is clicked:

```json
{
  "action": "candidate_response",
  "session_id": "INT-...",
  "candidate_id": "...",
  "job_description_id": "...",
  "candidate_response": "Yes, I'm ready to start the interview.",
  "timestamp": "..."
}
```

### 2. Candidate Response
When candidate responds to questions:

```json
{
  "action": "candidate_response",
  "session_id": "INT-...",
  "candidate_id": "...",
  "job_description_id": "...",
  "candidate_response": "Candidate's actual response...",
  "timestamp": "..."
}
```

## n8n Workflow Requirements

### Input Data Structure
Your n8n workflow should expect:

1. **Initial Interview Start:**
   - `action`: "candidate_response"
   - `candidate_response`: "Yes, I'm ready to start the interview."
   - Session and context information
   - **Your AI Interviewer should generate the initial greeting**

2. **Subsequent Responses:**
   - `action`: "candidate_response"
   - `candidate_response`: Candidate's actual response
   - Session and context information

### Expected Output
The n8n workflow should return:

```json
{
  "greeting": "Your AI Interviewer's generated greeting...",
  "response": "Next interview question...",
  "sessionId": "INT-..."
}
```

## Benefits

1. **AI-Generated Greeting:** Your AI Interviewer creates personalized greetings
2. **Complete Context:** AI Agent receives full candidate and job data
3. **Flexible Flow:** AI can adapt greeting based on candidate and job
4. **Professional Branding:** AI can include company branding naturally

## Testing

To test the updated workflow:

1. Start an interview from the Admin Test Interview page
2. Check the browser console for the webhook payload
3. Verify the n8n workflow receives the initial greeting and candidate response
4. Confirm the AI Agent responds with the correct greeting

## Notes

- The initial greeting is generated by your AI Interviewer (n8n workflow)
- No hardcoded greetings are sent from the frontend
- Your AI Interviewer has full context to create personalized greetings
- All webhook calls include comprehensive logging for debugging
